{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Categoría : MusicPro</title>

    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'products/favicon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'products/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'products/favicon/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'products/favicon/site.webmanifest' %}">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.2.0/mdb.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="{% static 'products/css/style.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,300;0,400;0,600;1,400&display=swap"
          rel="stylesheet">
</head>
<body class="category">
<!--Menu lateral - Menu -->
<section>
    <div id="sidebar-container" class="container-fluid">
        <div id="sidebar-bg" class="w-100 h-100"></div>
        <div id="sidebar" class="w-100 h-100">
            <div class="sidebar-content">
                <div class="sb-fixed">
                    <div class="row justify-content-between align-items-center m-0 sidebar-header">
                        <div class="col-auto">
                            <p>Tienda</p>
                        </div>
                        <div class="col-auto">
                            <button id="sidebar-close-btn" type="button" class="btn custom-btn1"><i
                                    class="fa-solid fa-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="sb-default">
                    <nav class="nav flex-column sidebar-body">
                        <p class="sidebar-subtitle mt-2">Categorías</p>
                        {% for cat in categorias %}
                            <button type="button" class="row gx-0 custom-btn1 category-btn">
                                <span class="col-auto">{{ cat.nombreCategoria }}</span>
                                <span class="col-auto ms-auto">
                            <i class="show-icon fa-solid fa-angle-down"></i>
                        </span>
                            </button>

                            <ul class="nav flex-column subcategories">
                                {% for sub in subcategorias %}
                                    {% if sub.categoria.idCategoria == cat.idCategoria %}
                                        <li class="nav-item">
                                            <a href="{{ sub.url }}" class="nav-link">{{ sub.nombreSubcategoria }}</a>
                                        </li>
                                    {% endif %}
                                {% endfor %}
                                <li class="nav-item">
                                    <a href="{{ cat.url }}" class="nav-link">Ver todo</a>
                                </li>
                            </ul>
                        {% endfor %}
                        <p class="sidebar-subtitle">Más</p>
                        <a href="#">Próximos lanzamientos</a>
                        <a href="#">Ofertas</a>
                        <hr>
                        <p class="sidebar-subtitle">Soporte</p>
                        <a href="{% url 'contact' %}">Contacto</a>
                        <a href="{% url 'questions' %}">Preguntas frecuentes</a>
                        <a href="{% url 'stores' %}">Nuestras tiendas</a>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</section>
<!--Menu lateral - Carro -->
<section>
    <div id="cart-sidebar-container" class="container-fluid">
        <div id="cart-sidebar-bg" class="w-100 h-100"></div>
        <div id="cart-sidebar" class="w-100 h-100 p-0">
            <div class="sidebar-content">
                <div class="sb-fixed">
                    <div class="row justify-content-between align-items-center m-0 w-100 sidebar-header">
                        <div class="col-auto">
                            <p>Carrito</p>
                        </div>
                        <div class="col-auto">
                            <button id="cart-sidebar-close-btn" type="button" class="btn custom-btn1"><i
                                    class="fa-solid fa-x"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div id="cart-sidebar-scroll" class="sb-default">
                    <nav id="cart-sidebar-body" class="nav flex-column sidebar-body">
                    </nav>
                </div>
                <div class="sb-fixed">
                    <div class="row align-items-center m-0 w-100 sidebar-footer">
                        <div class="col-12">
                            <div class="accordion" id="cart-detail">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="cart-detail-header">
                                        <button class="accordion-button fw-bold ps-0 pe-0" type="button"
                                                data-mdb-toggle="collapse" data-mdb-target="#cart-detail-content"
                                                aria-expanded="true" aria-controls="cart-detail-content">
                                            <span>Total: $</span><span id="cart-total">0</span>
                                        </button>
                                    </h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <a href="{% url 'checkout' %}" class="btn custom-btn2">Continuar compra</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--Categoría-->
<div class="d-flex flex-column justify-content-between page-wrapper">
    <div class="d-flex flex-column">
        <!--Menu superior-->
        <header class="navbar-header">
            <div class="container-fluid fixed-top">
                <div class="row align-items-center pe-3 ps-3 gap-2 header-container">
                    <div class="col-4 col-md-2 order-2 order-md-1 m-md-0 me-md-auto">
                        <a href="{% url 'home' %}"><img src="{% static 'products/img/MusicPro.png' %}"
                                                        class="img-fluid header-logo"
                                                        alt="logo"></a>
                    </div>
                    <div class="col-auto col-md-auto order-1 order-md-2">
                        <button id="sidebar-open-btn" type="button" class="btn custom-btn1">
                            <i class="fa-solid fa-bars header-icons"></i>
                        </button>
                    </div>
                    <div class="col-12 col-md-5 order-3 order-md-3">
                        <div class="row mb-2 mb-md-0 gx-0 justify-content-center search-bar-container">
                            <div class="col-auto">
                                <a href="#" class="search-bar-btn"><i class="fa-solid fa-magnifying-glass"></i></a>
                            </div>
                            <div class="col">
                                <input type="text" class="search-bar-input">
                            </div>
                        </div>
                    </div>
                    <div class="col-4 col-md-2 order-2 order-md-4 ms-auto">
                        <div class="row justify-content-end flex-nowrap header-icons">
                            <div class="col-auto gx-0">
                                <div class="dropdown">

                                    <button
                                            class="btn dropdown-toggle custom-btn1"
                                            type="button"
                                            id="dropdownMenuButton"
                                            data-mdb-toggle="dropdown"
                                            aria-expanded="false">
                                        {% if user.is_authenticated %}
                                            Bienvenido/a <i class="fa-solid fa-circle-user"></i>
                                        {% else %}
                                            <i class="fa-solid fa-circle-user"></i>
                                        {% endif %}
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        {% if user.is_authenticated %}
                                            {% if user.is_staff %}
                                                <li><a class="dropdown-item" href="{% url 'administration' %}">Administrar
                                                    web</a></li>
                                            {% endif %}
                                            <li><a class="dropdown-item" href="{% url 'orders' %}">Mis compras</a></li>
                                            <li><a class="dropdown-item" href="{% url 'logout' %}">Cerrar sesión</a>
                                            </li>
                                        {% else %}
                                            <li><a class="dropdown-item" href="{% url 'login' %}">Iniciar sesión</a>
                                            </li>
                                        {% endif %}
                                    </ul>
                                </div>
                            </div>
                            <div class="col-auto">
                                <button id="cart-sidebar-open-btn" class="btn custom-btn1"><i
                                        class="fa-solid fa-cart-shopping"></i>
                                    <span id="cart-product-count"
                                          class="badge rounded-pill badge-notification bg-success"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!--Productos-->
        <section>
            <div class="container-fluid mt-4 mb-4">
                <div class="row justify-content-center">
                    <div class="col category-box">
                        <div class="row">
                            <div class="col-12">
                                <nav aria-label="breadcrumb">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="{% url 'home' %}">Inicio</a></li>
                                        {% if breadcrumb.has_sub %}
                                            <li class="breadcrumb-item">
                                                <a href="{{ breadcrumb.cat_url }}">{{ breadcrumb.cat }}</a>
                                            </li>
                                            <li class="breadcrumb-item">{{ breadcrumb.sub }}</li>
                                        {% else %}
                                            <li class="breadcrumb-item">{{ breadcrumb.cat }}</li>
                                        {% endif %}
                                    </ol>
                                </nav>
                            </div>
                            <div class="col-12 col-md-4 col-xl-3">
                                <div id="cat-sb-container" class="container-fluid p-0">
                                    <div id="cat-sb-bg"></div>
                                    <div id="cat-sb">
                                        <div class="row justify-content-between align-items-center m-0 sidebar-header">
                                            <div class="col-auto">
                                                <p>Filtrar</p>
                                            </div>
                                            <div class="col-auto">
                                                <button id="cat-sb-close-btn" type="button" class="btn custom-btn1"><i
                                                        class="fa-solid fa-x"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <nav class="nav flex-column sidebar-body">
                                            <button id="filter-1-btn" type="button" class="row gx-0 custom-btn1">
                                                <span class="col-auto">Disponibilidad</span>
                                                <span class="col-auto ms-auto">
                                        <i id="filter-show-icon-1" class="show-icon fa-solid fa-angle-down"></i>
                                    </span>
                                            </button>
                                            <ul id="filter-1-sub" class="nav flex-column">
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox"
                                                               value="available"
                                                               id="availableCbx"/>
                                                        <label class="form-check-label"
                                                               for="availableCbx">Disponible</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="presale"
                                                               id="presaleCbx"/>
                                                        <label class="form-check-label" for="presaleCbx">En
                                                            preventa</label>
                                                    </div>
                                                </li>
                                            </ul>
                                            <button id="filter-2-btn" type="button" class="row gx-0 custom-btn1">
                                                <span class="col-auto">Intrumento</span>
                                                <span class="col-auto ms-auto">
                                        <i id="filter-show-icon-2" class="show-icon fa-solid fa-angle-down"></i>
                                    </span>
                                            </button>
                                            <ul id="filter-2-sub" class="nav flex-column">
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="1"
                                                               id="PS5Cbx"/>
                                                        <label class="form-check-label" for="PS5Cbx">Guitarras Acusticas</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="2"
                                                               id="XBXSCbx"/>
                                                        <label class="form-check-label" for="XBXSCbx">Set de Baterias</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="3"
                                                               id="NSWCbx"/>
                                                        <label class="form-check-label" for="NSWCbx">Pianos</label>
                                                    </div>
                                                </li>
                                            </ul>
                                            <button id="filter-3-btn" type="button" class="row gx-0 custom-btn1">
                                                <span class="col-auto">Precio</span>
                                                <span class="col-auto ms-auto">
                                        <i id="filter-show-icon-3" class="show-icon fa-solid fa-angle-down"></i>
                                    </span>
                                            </button>
                                            <ul id="filter-3-sub" class="nav flex-column">
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               name="priceRangeRad"
                                                               value="1"
                                                               id="priceRange1Rad"/>
                                                        <label class="form-check-label" for="priceRange1Rad">$0 -
                                                            $15000</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               name="priceRangeRad"
                                                               value="2"
                                                               id="priceRange2Rad"/>
                                                        <label class="form-check-label" for="priceRange2Rad">$15000 -
                                                            $30000</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               name="priceRangeRad"
                                                               value="3"
                                                               id="priceRange3Rad"/>
                                                        <label class="form-check-label" for="priceRange3Rad">$30000 -
                                                            $45000</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               name="priceRangeRad"
                                                               value="4"
                                                               id="priceRange4Rad"/>
                                                        <label class="form-check-label" for="priceRange4Rad">$45000 -
                                                            $60000</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               name="priceRangeRad"
                                                               value="5"
                                                               id="priceRange5Rad"/>
                                                        <label class="form-check-label" for="priceRange5Rad">$60000 -
                                                            $75000</label>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio"
                                                               name="priceRangeRad"
                                                               value="6"
                                                               id="priceRange6Rad"/>
                                                        <label class="form-check-label" for="priceRange6Rad">$75000 -
                                                            $90000</label>
                                                    </div>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-8 col-xl-9">
                                <div class="row flex-column gap-3">
                                    <div class="col-12">
                                        <div class="row align-items-end">
                                            <div class="col-auto">
                                                <button id="cat-sb-open-btn" class="btn custom-btn2"><i
                                                        class="fa-solid fa-filter"></i></button>
                                            </div>
                                            <div class="col-auto ms-auto">
                                                <div class="select">
                                                    <p class="text-end mb-1" style="font-size: 12px; font-weight: bold">
                                                        Ordenar
                                                        por: </p>
                                                    <div class="row gx-0 gap-3 align-items-center">
                                                        <div class="col-auto">
                                                            <i class="fa-solid fa-right-left"
                                                               style="transform: rotate(90deg)"></i>
                                                        </div>
                                                        <div class="col">
                                                            <select class="form-select custom-select">
                                                                <option value="1">Precio</option>
                                                                <option value="2">Popularidad</option>
                                                                <option value="3">Descuento</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-auto product-grid">
                                        {% for prod in productos %}
                                            <div class="card item-card">
                                                <a class="item-card-link" href="{{ prod.url }}"></a>
                                                <div class="col-auto align-self-center">
                                                    <img src="{{ prod.imagenProducto.cdn_url }}"
                                                         class="card-img-top img-fluid"
                                                         alt="{{ prod.nombreProducto }}">
                                                </div>
                                                <div class="col-auto card-body">
                                                    <p class="item-platform text-center"
                                                       style="font-size: 14px;">
                                                        {{ prod.modeloProducto }}</p>
                                                    <div class="item-title-wrapper text-center">
                                                        <span>{{ prod.nombreProducto }}</span>
                                                    </div>
                                                    <p class="text-center"
                                                       style="font-size: 18px; font-weight: 600">
                                                        ${{ prod.precioProducto }}</p>
                                                    <input name="idProducto" type="hidden"
                                                           value="{{ prod.idProducto }}">
                                                    <form name="addToCartForm" action=""
                                                          class="row justify-content-center pt-2 pb-2">
                                                        {% csrf_token %}
                                                        {{ carritoProductoForm }}
                                                        <button type="submit"
                                                                class="col-md-auto btn-rounded custom-btn2">
                                                            <span>Añadir al carro</span>
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>

                                    <div class="col-auto align-self-center align-self-md-end">
                                        <nav class="table-responsive" aria-label="Page navigation">
                                            <input id="numPages" type="hidden"
                                                   value="{{ productos.paginator.num_pages }}">
                                            <input id="currentPage" type="hidden"
                                                   value="{{ productos.number }}">
                                            <ul id="pages" class="pagination pagination-circle">
                                                {% if productos.has_previous %}
                                                    <li class="page-item">
                                                        <a href="?page={{ productos.previous_page_number }}"
                                                           class="page-link" aria-label="Previous">
                                                            <i class="fa-solid fa-angles-left"
                                                               style="font-size: 10px"></i>
                                                        </a>
                                                    </li>
                                                {% else %}
                                                    <li class="page-item disabled">
                                                        <a href="#"
                                                           class="page-link" aria-label="Previous">
                                                            <i class="fa-solid fa-angles-left"
                                                               style="font-size: 10px"></i>
                                                        </a>
                                                    </li>
                                                {% endif %}
                                                {% if productos.has_next %}
                                                    <li id="lastPage" class="page-item">
                                                        <a href="?page={{ productos.next_page_number }}"
                                                           class="page-link" aria-label="Next">
                                                            <i class="fa-solid fa-angles-right"
                                                               style="font-size: 10px"></i>
                                                        </a>
                                                    </li>
                                                {% else %}
                                                    <li id="lastPage" class="page-item disabled">
                                                        <a href="#"
                                                           class="page-link" aria-label="Next">
                                                            <i class="fa-solid fa-angles-right"
                                                               style="font-size: 10px"></i>
                                                        </a>
                                                    </li>
                                                {% endif %}
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!--Pie de pagina-->
    <footer>
        <div class="container-fluid">
            <div class="row justify-content-center justify-content-sm-start align-items-center ps-3 pe-3 pt-3 pb-3 gap-3 gap-sm-0 footer-content-container">
                <div class="col-auto col-sm-6">
                    <div class="row gap-2 justify-content-center justify-content-sm-start align-items-center">
                        <div class="col-12 col-md-auto text-center text-sm-start">
                            <h4>Síguenos en</h4>
                        </div>
                        <div class="col-auto">
                            <a class="btn btn-primary btn-lg btn-floating" style="background-color: #8083ff;" href="#"
                               role="button">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                        <div class="col-auto">
                            <a class="btn btn-primary btn-lg btn-floating" style="background-color: #8083ff;" href="#"
                               role="button">
                                <i class="fab fa-facebook"></i>
                            </a>
                        </div>
                        <div class="col-auto">
                            <a class="btn btn-primary btn-lg btn-floating" style="background-color: #8083ff;" href="#"
                               role="button">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-auto col-sm-6">
                    <div class="row gap-3 justify-content-center justify-content-sm-end shortcuts">
                        <div class="col-auto">
                            <a href="{% url 'terms' %}"><h4>Términos y condiciones</h4></a>
                        </div>
                        <div class="col-auto">
                            <a href="{% url 'questions' %}"><h4>Preguntas frecuentes</h4></a>
                        </div>
                        <div class="col-auto">
                            <a href="{% url 'stores' %}"><h4>Nuestras tiendas</h4></a>
                        </div>
                        <div class="col-auto">
                            <a href="{% url 'contact' %}"><h4>Contacto</h4></a>
                        </div>
                        <div class="col-auto">
                            <a href="{% url 'home' %}"><h4>Inicio</h4></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-auto gx-0">
                    <img src="{% static 'products/img/footer galaxy.png' %}" class="img-fluid" alt="galaxy">
                </div>
            </div>
        </div>
    </footer>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/777d474a1b.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.2.0/mdb.min.js"></script>
<script src="{% static 'products/js/script.js' %}"></script>
</body>
</html>